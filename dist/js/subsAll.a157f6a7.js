(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["subsAll"],{"673e":function(s,t,i){"use strict";i("386b")("sub",function(s){return function(){return s(this,"sub","","")}})},d33b:function(s,t,i){"use strict";i.r(t);var e=function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("v-flex",{staticClass:"mb-5",attrs:{xs12:"",lg10:""}},[s.subscriptions.length?i("v-flex",{attrs:{xs12:"","py-3":""}},[s.subscriptions.length>0?i("span",[i("v-chip",{on:{click:function(t){s.bTog=!s.bTog}}},[s._v(s._s(s.bTog?"Hide":"Show"))]),i("v-chip",{class:s.chips.length==s.subscriptions.length?"primary white--text":"",on:{click:function(t){s.chips.length!=s.subscriptions.length?s.chips=s.subscriptions:s.chips=[]}}},[s._v("All")]),i("v-chip",{class:s.bShuf?"primary white--text":"",on:{click:function(t){s.chips=s.shuffle(s.subscriptions)}}},[s._v("Random")]),i("v-chip",{on:{click:function(t){s.chips=[]}}},[s._v("Clear")])],1):s._e(),i("br"),s.bTog?s._l(s.subscriptions,function(t,e){return i("v-chip",{key:e,staticClass:"noSel",class:s.someChips(t),on:{mousedown:function(i){return s.hai(t,e)}}},[i("v-avatar",{attrs:{outclass:"accent white--text"}},[i("img",{attrs:{src:t.img}})]),s._v(s._s(t.name))],1)}):s._e(),s.bTog?i("v-chip",{on:{click:function(t){s.chips=[]}}},[s._v("Clear")]):s._e()],2):s._e(),i("playlist",{attrs:{songs:s.aFiltered,"show-uploaded":!0,"rows-per-page":"126","sort-by":"uploaded"},on:{conmen:function(t){return s.$emit("conmen",t)}}}),!s.bLoading&&s.subscriptions.length>0?i("jumbo",{attrs:{title:"We wanted grab the latest songs from your subscriptions",subheading:"But you haven't subscribed to anyone yet"}}):s._e()],1)},n=[],a=(i("55dd"),i("673e"),i("be94")),o=i("2f62"),h=i("a1b2"),r={name:"SubsAll",props:{user:{type:String,default:""}},components:{jumbo:h["a"]},watch:{auth_state:{immediate:!0,handler:"bind"}},data(){return{bShuf:!1,aShuf:[],bLoading:!0,bFailed:!1,bLoadedSubs:0,aPlaylists:[],aPlaylists2:[],subscriptions:[],chips:[],chipsToGo:[],bTog:!1}},computed:Object(a["a"])({},Object(o["c"])({auth_state:s=>s.user.auth_state}),Object(o["b"])(["textColor"]),{aFiltered(){return this.chips.length?this.aPlaylists.filter(s=>this.chips.some(t=>t.id==s.artistID)):[]}}),methods:{shuffle(s){let t=[],i=(s.length-1)/Math.max(5,Math.floor(5*Math.random()))|0;console.log("length",s.length-1," ",i);for(var e=0;e<i-1;e++){var n=e+Math.floor(Math.random()*(s.length-e));t[e]=s[n]}return t},someChips(s){return!!this.chips.some(t=>t[".key"]==s[".key"])&&`primary ${this.textColor}`},hai(s){this.someChips(s)?1==this.chips.length?this.chips=[]:this.chips=this.chips.filter(t=>t!==s):this.chips.push(s)},bind(){this.auth_state&&(this.bLoading=!0,this.$bindAsArray("subscriptions",this.$DCFB.subscriptionGet(this.user).orderByChild("name_lower"),null,()=>{this.getAllSubs()}))},getAllSubs(){if(!this.subscriptions.length)return this.bLoading=!1,void(this.bFailed=!0);this.bLoadedSubs=0;let s=!1;for(var t in setTimeout(()=>{s=!0,this.aPlaylists=this.aPlaylists2},1e3),this.subscriptions)this.$DCAPI.searchInt(0,0,[this.subscriptions[t].source],this.subscriptions[t].id,t=>{this.bLoadedSubs+=1,this.aPlaylists2=this.aPlaylists2.concat(t),this.aPlaylists2.sort(this.$DCAPI.sortDate),(this.subscriptions.length===this.bLoadedSubs||s)&&(this.aPlaylists=this.aPlaylists2)},!1,50)}}},l=r,c=i("2877"),u=i("6544"),b=i.n(u),p=i("8212"),d=i("cc20"),g=i("0e8f"),f=Object(c["a"])(l,e,n,!1,null,null,null);t["default"]=f.exports;b()(f,{VAvatar:p["a"],VChip:d["a"],VFlex:g["a"]})}}]);